"use strict";var V=Object.create;var g=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var k=(e,t)=>{for(var n in t)g(e,n,{get:t[n],enumerable:!0})},S=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of w(t))!E.call(e,r)&&r!==n&&g(e,r,{get:()=>t[r],enumerable:!(a=I(t,r))||a.enumerable});return e};var P=(e,t,n)=>(n=e!=null?V(v(e)):{},S(t||!e||!e.__esModule?g(n,"default",{value:e,enumerable:!0}):n,e)),T=e=>S(g({},"__esModule",{value:!0}),e);var z={};k(z,{map:()=>$,value:()=>q});module.exports=T(z);var m=P(require("deepmerge")),A=require("jsonpath-plus"),M={objectMergeMode:"overwrite",arrayMergeMode:"replace"},N=(e,t)=>[...Array(t-e)].map((n,a)=>e+a),O=(e,t)=>t,_=(e,t)=>e;function j(e){return e.startsWith("`")?e.substring(1):e}function W(e){return e.startsWith("$.")}function x(e){return!!e&&typeof e=="object"&&"@path"in e&&typeof e["@path"]=="string"}function C(e){return!!e&&typeof e=="object"&&"@element"in e&&!!e["@element"]&&typeof e["@element"]=="object"}function h(e,t,n,a){let r=n;if(x(n)){if(r=h(e,t,n["@path"],a),n["@default"]!==void 0&&(r=r!=null?r:f(e,t,n["@default"],a)),n["@transform"]){let i={source:e,schema:n["@path"]};r=n["@transform"](r,t,i)}}else if(typeof n=="string")if(W(n)){let i=!0,c=n;n.endsWith("[]")&&(c=n.substring(0,n.length-2),i=!1);let l=(0,A.JSONPath)({path:c,json:e});i&&Array.isArray(l)&&l.length<=1?r=l[0]:r=l}else r=j(n);return r}function D(e,t,n,a){let r=t;(!r||typeof r!="object")&&(r={});let i=Object.fromEntries(Object.entries(n).map(([b,y])=>{let J=j(b);return[J,f(e,r[J],y,a)]})),c;switch(a.arrayMergeMode){case"replace":c=O;break;case"append":case"prepend":switch(a.objectMergeMode){case"overwrite":c=O;break;case"preserve":c=_;break}break}let l=r;switch(a.objectMergeMode){case"overwrite":l=(0,m.default)(r,i,{arrayMerge:c});break;case"preserve":l=(0,m.default)(i,r,{arrayMerge:c});break;case"replace":l=i;break}return l}function R(e,t,n,a){let r=t;Array.isArray(t)||(r=[]);let i=n.flatMap((l,b)=>{if(C(l)){let y={};for(let[o,u]of Object.entries(l["@element"])){let s=u==null?void 0:u["@padding"],p=f(e,r[b],u,a);y[o]=[p,s]}let J=Math.max(...Object.values(y).map(([o])=>Array.isArray(o)?o.length:1));if(l["@length"]){let o=f(e,null,l["@length"],a);Number.isInteger(o)&&(J=o),Array.isArray(o)&&(J=o.length)}return N(0,J).map(o=>Object.fromEntries(Object.entries(y).map(([u,[s,p]])=>{var d;if(Array.isArray(s))switch(p!=null?p:"empty"){case"empty":return[u,s[o]];case"edge":return[u,(d=s[o])!=null?d:s.at(-1)];case"reflect":return[u,s[(o/s.length|0)%2===0?o%s.length:s.length-1-o%s.length]];case"wrap":return[u,s[o%s.length]]}switch(p!=null?p:"edge"){case"empty":return[u,o===0?s:void 0];default:return[u,s]}}).filter(([u,s])=>s!==void 0)))}return[f(e,r[b],l,a)]}),c=r;switch(a.arrayMergeMode){case"replace":c=i;break;case"append":c=[...r,...i];break;case"prepend":c=[...i,...r];break}return c}function f(e,t,n,a){return Array.isArray(n)?R(e,t,n,a):n!=null&&typeof n=="object"&&!x(n)?D(e,t,n,a):h(e,t,n,a)}function $(e,t,n=null,a){let r=Object.assign({},M,a!=null?a:{});return f(e,n,t,r)}function q(e,t){return h(e,null,t,M)}
